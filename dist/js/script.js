!function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],a=n.length,i=window.console=window.console||{};a--;)e=n[a],i[e]||(i[e]=t)}(),document.addEventListener("DOMContentLoaded",function(){var e=function(){var t=function(e,t,n,a,i,r){this.city=e,this.min=t,this.max=n,this.curr=a,this.icon=i,this.alt=r},n=["455825","2379574","44418","523920","1118370","1105779","615702"],a=0;return{testing:function(){console.log(data)},getLoadingFlag:function(){return a},increaseLoadingFlag:function(){a++},getDataFromSerwer:function(t,n){var a=t,i=""+a;$.ajax({url:"https://crossorigin.me/https://www.metaweather.com/api/location/"+i,type:"GET",cache:!0,success:function(t,a,i){e.increaseLoadingFlag(),$.isFunction(n)&&n(t)},error:function(t,a,i){e.increaseLoadingFlag(),console.log("error",t,a,i),$.isFunction(n)&&n(!1)}})},getValuesFromData:function(e){var n=e.title,a=this.roundValues(e.consolidated_weather[0].min_temp),i=this.roundValues(e.consolidated_weather[0].max_temp),r=this.roundValues(e.consolidated_weather[0].the_temp),o=e.consolidated_weather[0].weather_state_abbr,s=e.consolidated_weather[0].weather_state_name;return new t(n,a,i,r,o,s)},roundValues:function(e){return Math.round(e)},locationSearch:function(e,t){var n=e;$.ajax({url:"https://crossorigin.me/https://www.metaweather.com/api/location/search/?query="+n,type:"GET",cache:!0,success:function(e,n,a){if($.isFunction(t))if(""==e)$.isFunction(t)&&t(!1);else{var i=e[0].woeid;t(i)}},error:function(e,n,a){console.log("error",e,n,a),$.isFunction(t)&&t(!1)}})},getStartData:function(){return n}}}(),t=function(){var e={addCityInpt:".add-city--input",addCityBtn:".add-city--button",addCityP:".add-city--p",messageSpinner:".message--spinner"};return{getDOMstrings:function(){return e},addWheatherBox:function(e){var t='<div class="section--item"><div class="weather-box"><div class="weather-box--el weather-box--el__temp"><div class="temp--el temp--el__min"><span><b>Min:</b> %min% &#176;C</span></div><div class="temp--el temp--el__max"><span><b>Max:</b> %max% &#176;C</span></div></div><div class="weather-box--el weather-box--el__icon"><img src="https://www.metaweather.com/static/img/weather/png/64/%icon%.png" alt="%alt%"></div><div class="weather-box--el weather-box--el__city"> <span>%city%</span></div><div class="weather-box--el weather-box--el__curr-temp"><span>%curr% &#176;C</span></div></div></div>',n=t.replace("%min%",e.min);n=n.replace("%max%",e.max),n=n.replace("%icon%",e.icon),n=n.replace("%ialt%",e.alt),n=n.replace("%city%",e.city),n=n.replace("%curr%",e.curr),$(".section--item__plus").before(n)},printMessage:function(t){$(e.addCityP).text(t)},getInput:function(t){return void 0===t?$(e.addCityInpt).val():$(e.addCityInpt).val(t)},addSpinner:function(){$(e.messageSpinner).addClass("message--spinner__show")},remSpinner:function(){$(e.messageSpinner).removeClass("message--spinner__show")},ableButton:function(){$(e.addCityBtn).removeClass("disabled")}}}();(function(e,t){var n=t.getDOMstrings(),a=function(n){e.locationSearch(n,function(e){0!=e?(r(e),t.printMessage("Location found. Prepering to add.")):(t.printMessage("Location not found."),t.remSpinner())})},r=function(n){e.getDataFromSerwer(n,function(n){if(0!=n){var a=e.getValuesFromData(n);t.addWheatherBox(a),e.getLoadingFlag()==e.getStartData().length?(t.printMessage("You can add city."),t.remSpinner(),t.ableButton()):e.getLoadingFlag()>e.getStartData().length&&(t.printMessage("Location added. You can add more!"),t.remSpinner())}else e.getLoadingFlag()==e.getStartData().length?(t.printMessage("Sorry, problem with MethaWeather API. Not alll citys may by loaded."),t.remSpinner(),t.ableButton()):(t.printMessage("Sorry, problem with MethaWeather API. Please try again."),t.remSpinner())})},o=function(e){""===t.getInput()?t.printMessage("Please type a city name."):(console.log(t.getInput()),a(t.getInput()),t.printMessage("Searching in progress..."),t.addSpinner(),t.getInput(""))},s=function(){$(n.addCityBtn).click(o),$(document).keyup(function(e){13===e.which&&o()})},c=function(e){for(i=0;i<e.length;i++)r(e[i])};return{init:function(){console.log("App has started"),s(),c(e.getStartData())}}})(e,t).init()});